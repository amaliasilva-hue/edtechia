# =============================================================================
# EdTechia — Environment Variables
# Copy to .env.local and fill in all values before running the app.
# NEVER commit .env.local to git.
# =============================================================================

# ─── NextAuth.js ──────────────────────────────────────────────────────────────
# Generate NEXTAUTH_SECRET with: openssl rand -base64 32
NEXTAUTH_SECRET=
NEXTAUTH_URL=http://localhost:3000

# Google OAuth 2.0 (from GCP Console → APIs & Services → Credentials)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ─── GCP Core ─────────────────────────────────────────────────────────────────
GCP_PROJECT_ID=br-ventasbrasil-cld-01
GCP_REGION=us-central1

# Service Account key — either a file path OR a base64-encoded JSON string
# Option A (local dev): path to the JSON key file
GOOGLE_APPLICATION_CREDENTIALS=./edtechia-sa-key.json
# Option B (production/Cloud Run): base64-encoded content of the JSON key
# GCP_SERVICE_ACCOUNT_KEY_BASE64=

# ─── BigQuery ─────────────────────────────────────────────────────────────────
BQ_DATASET=edtech_platform
BQ_TABLE_DOCS=exam_documents
BQ_TABLE_SESSIONS=exam_sessions
BQ_TABLE_HISTORY=question_history
BQ_LOCATION=US

# ─── Google Cloud Storage ─────────────────────────────────────────────────────
GCS_BUCKET=br-ventasbrasil-cld-01-exam-docs

# ─── Vertex AI ────────────────────────────────────────────────────────────────
VERTEX_AI_LOCATION=us-central1

# Gemini model fallback chain — tried in order until a valid response is returned
# gemini-2.5-pro is MANDATORY as primary. Others are cost/availability fallbacks.
VERTEX_AI_MODEL_PRIMARY=gemini-2.5-pro
VERTEX_AI_MODEL_FALLBACK_1=gemini-2.0-flash
VERTEX_AI_MODEL_FALLBACK_2=gemini-1.5-pro-002
VERTEX_AI_MODEL_FALLBACK_3=gemini-1.5-flash-002

VERTEX_EMBEDDING_MODEL=text-embedding-004

# BigQuery ML remote model full path
BQ_EMBEDDING_MODEL=br-ventasbrasil-cld-01.edtech_platform.embedding_model
BQ_VERTEX_CONNECTION=br-ventasbrasil-cld-01.us.vertex_conn

# ─── Cloud Vision OCR (fallback for scanned PDFs) ─────────────────────────────
# Uses the same GOOGLE_APPLICATION_CREDENTIALS — no extra key needed.
# Threshold: if MuPDF extracts fewer chars than this, Vision OCR is triggered.
VISION_OCR_MIN_CHARS=200
